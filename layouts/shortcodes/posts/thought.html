{{- $title := .Get "title" | default "ç¢ç¢å¿µ" -}}
{{- $meta := .Get "meta" | default "ç¢ç¢å¿µ" -}}
{{- $mood := .Get "mood" | default "reflect" -}}

{{/* --- ğŸ¨ 30 ç§é«˜çº§è‰²è°± (æ–‡å­—æƒ…ç»ªåˆ†ç±»æ£€ç´¢ç‰ˆ) --- */}}
{{- $accent := "#7B8B9C" -}} {{/* é»˜è®¤ï¼šè¿œå±±è“ */}}

{{/* A. ç†æ€§ã€æ€è€ƒã€æ·¡æ·¡çš„å¿§éƒ (é€‚åˆï¼šéšç¬”ã€æ·±åº¦æ€è€ƒã€å“²å­¦ç‹¬ç™½) */}}
{{- if eq $mood "fog" -}}         {{$accent = "#7B8B9C"}}{{/* è¿œå±±è“ï¼šå†·é™å®¢è§‚çš„æ€è€ƒ */}}
{{- else if eq $mood "mist" -}}    {{$accent = "#9DA5A8"}}{{/* è¿·é›¾ç°ï¼šè¿·èŒ«æˆ–æ¨¡ç³Šçš„è®°å¿† */}}
{{- else if eq $mood "plum" -}}    {{$accent = "#9079AD"}}{{/* çƒŸæ¢…è‰² dreamyï¼šæ„Ÿæ€§ä¸ç†æ€§çš„è¾¹ç•Œ */}}
{{- else if eq $mood "indigo" -}}  {{$accent = "#5D7599"}}{{/* é›é’è‰²ï¼šæ·±å¤œçš„é™æ€ */}}
{{- else if eq $mood "sand" -}}    {{$accent = "#BDB3A7"}}{{/* æµ…æ²™è‰²ï¼šæç®€ã€ç©ºæ— ã€ç•™ç™½ */}}

{{/* B. æ„Ÿæ€§ã€æ‚¸åŠ¨ã€æŸ”è½¯çš„æ€€å¿µ (é€‚åˆï¼šæƒ…ä¹¦ã€æ¸©æŸ”æ—¶åˆ»ã€æ€€æ—§å¾€äº‹) */}}
{{- else if eq $mood "sakura" -}}  {{$accent = "#F4B5AD"}}{{/* åˆæ¨±ç²‰ï¼šåˆè§æˆ–ç¾å¥½çš„ç¬é—´ */}}
{{- else if eq $mood "rose" -}}    {{$accent = "#B47E88"}}{{/* æ¯ç«ç‘°ï¼šç ´ç¢ä½†ç¾ä¸½çš„æ€€å¿µ */}}
{{- else if eq $mood "camellia" -}}{{$accent = "#D68D9A"}}{{/* å±±èŒ¶è‰²ï¼šçƒ­çƒˆè€Œå«è“„çš„çˆ±æ„ */}}
{{- else if eq $mood "petal" -}}   {{$accent = "#E8C3C9"}}{{/* æµ…ç“£ç²‰ï¼šå°‘å¥³å¿ƒã€å¾®ç”œçš„æ—¥å¸¸ */}}
{{- else if eq $mood "dusk" -}}    {{$accent = "#C1969B"}}{{/* æ™šéœç²‰ï¼šè½æ—¥ä½™æ™–ä¸‹çš„æ¸©æŸ” */}}

{{/* C. å™äº‹ã€åšé‡ã€å¤å…¸çš„è´¨æ„Ÿ (é€‚åˆï¼šç”Ÿæ´»å²ã€ä¼ ç»Ÿæ–‡åŒ–ã€æ²‰ç¨³çš„çºªå½•) */}}
{{- else if eq $mood "vermilion" -}}{{$accent = "#B35C44"}}{{/* æœ±ç ‚çº¢ï¼šä¼ ç»Ÿçš„å–œæ‚¦æˆ–åº„é‡ */}}
{{- else if eq $mood "cyan" -}}     {{$accent = "#5C8A8A"}}{{/* é»›è“è‰²ï¼šå¦‚å±±æ°´ç”»èˆ¬çš„å®é™ */}}
{{- else if eq $mood "gold" -}}     {{$accent = "#AD9152"}}{{/* ç¥ç€é‡‘ï¼šå²æœˆçš„æ²‰æ·€ä¸å…‰æ³½ */}}
{{- else if eq $mood "jade" -}}     {{$accent = "#61856E"}}{{/* è‹ç¿ è‰²ï¼šå¤è€ã€åšéŸ§ã€è‡ªç„¶ */}}
{{- else if eq $mood "ink" -}}      {{$accent = "#4F5355"}}{{/* å¾½å¢¨é»‘ï¼šä¹¦å·æ°”ã€æ·±æ²‰çš„è‡ªç™½ */}}

{{/* D. å¹³å’Œã€è¸å®ã€ç”Ÿæ´»çš„æ°”æ¯ (é€‚åˆï¼šæ—¥å¸¸å°è®°ã€æ•£æ­¥è®°å½•ã€å¹³å‡¡ç”Ÿæ´») */}}
{{- else if eq $mood "wood" -}}    {{$accent = "#8C7B6C"}}{{/* æª€æœ¨æ£•ï¼šåƒæœ¨å¤´ä¸€æ ·ç¨³å›ºçš„æƒ…ç»ª */}}
{{- else if eq $mood "clay" -}}    {{$accent = "#A68069"}}{{/* èµ­çŸ³åœŸï¼šå¤§åœ°èˆ¬çš„åŒ…å®¹æ„Ÿ */}}
{{- else if eq $mood "moss" -}}    {{$accent = "#7D8259"}}{{/* è‹”è—“ç»¿ï¼šä¸èµ·çœ¼ä½†é¡½å¼ºçš„ç”Ÿå‘½ */}}
{{- else if eq $mood "cedar" -}}   {{$accent = "#958172"}}{{/* é›ªæ¾æœ¨ï¼šæ¸…æ™¨æ£®æ—çš„æœ¨è´¨é¦™ */}}
{{- else if eq $mood "autumn" -}}  {{$accent = "#BD8260"}}{{/* æ™šç§‹æ©˜ï¼šæ”¶è·åçš„ä»å®¹ä¸çŸ¥è¶³ */}}

{{/* E. å…‹åˆ¶ã€ç–ç¦»ã€å†·å³»çš„å­¤ç‹¬ (é€‚åˆï¼šç‹¬å¤„ã€é›ªå¤©ã€æ¸…å†·çš„æ¸…æ™¨) */}}
{{- else if eq $mood "lake" -}}    {{$accent = "#6B8E8E"}}{{/* é™è°§æ¹–ï¼šæ·±ä¸è§åº•çš„å®é™ */}}
{{- else if eq $mood "ice" -}}     {{$accent = "#A5B9C7"}}{{/* ç¢å†°è“ï¼šæ¸…æ¾ˆã€å¯’å†·ã€é€æ˜ */}}
{{- else if eq $mood "deep" -}}    {{$accent = "#4A677D"}}{{/* æ·±æµ·è“ï¼šæè‡´çš„å­¤ç‹¬ä¸è¾½é˜” */}}
{{- else if eq $mood "mint" -}}    {{$accent = "#8FAEA3"}}{{/* å¯’è–„è·ï¼šæ¸…é†’å¾—ç”šè‡³æœ‰äº›åˆºéª¨ */}}
{{- else if eq $mood "winter" -}}  {{$accent = "#B2B8C1"}}{{/* å†¬äº‘ç°ï¼šé˜´å¤©é‡Œçš„æ²‰é»˜ */}}

{{/* F. æ²»æ„ˆã€æ˜äº®ã€å‘ä¸Šçš„èƒ½é‡ (é€‚åˆï¼šé¼“åŠ±ã€å¿«ä¹ç¬é—´ã€æ¸…æ–°çš„æ„¿æœ›) */}}
{{- else if eq $mood "matcha" -}}  {{$accent = "#95A472"}}{{/* æŠ¹èŒ¶è‰²ï¼šå‘¼å¸æ„Ÿã€æ”¾æ¾çš„èº«å¿ƒ */}}
{{- else if eq $mood "sunset" -}}  {{$accent = "#D49A89"}}{{/* æš–è½æ—¥ï¼šè¢«ä¸–ç•Œæ¸©æŸ”åŒ…è£¹ */}}
{{- else if eq $mood "honey" -}}   {{$accent = "#C9A16A"}}{{/* èœ‚èœœé»„ï¼šç”Ÿæ´»é‡Œçš„ç”œä¸å…‰äº® */}}
{{- else if eq $mood "lavender" -}}{{$accent = "#A7A1C1"}}{{/* è–°è¡£è‰ï¼šæµªæ¼«è€Œå¹³é™çš„æ¢¦å¢ƒ */}}
{{- else if eq $mood "lemon" -}}   {{$accent = "#D9C175"}}{{/* æŸ æª¬ç›ï¼šæ¸…çˆ½ã€æ´»æ³¼ã€æœ‰æœæ°” */}}
{{- end -}}

<article class="apple-editorial">
    <header class="editorial-header">
        <div class="metadata" style="color: {{ $accent }}">{{ $meta }}</div>
        <h1 class="main-title">{{ $title }}</h1>
    </header>

    <section class="editorial-body" style="--mood-color: {{ $accent }};">
        {{ .Inner | markdownify }}
    </section>
</article>

<style>
/* 1. åŸºç¡€å®¹å™¨ */
.apple-editorial {
    max-width: 650px;
    margin: 40px auto;
    color: var(--primary);
    line-height: 1.75;
    font-family: -apple-system, "SF Pro Display", "PingFang SC", sans-serif;
    -webkit-font-smoothing: antialiased;
}

/* 2. æ ‡é¢˜åŒº */
.metadata {
    font-size: 11px;
    letter-spacing: 0.2em;
    font-weight: 700;
    margin-bottom: 10px;
    text-transform: uppercase;
}
.main-title {
    font-size: 1.85rem;
    font-weight: 800;
    letter-spacing: -0.03em;
    margin-bottom: 40px;
    color: var(--primary);
}

/* 3. æ­£æ–‡æ’ç‰ˆ */
.editorial-body p {
    margin-bottom: 1.4rem;
    opacity: 0.9;
    font-size: 1.05rem;
}

/* --- ğŸŒŸ ç»†èŠ‚å¾®è°ƒåŒº --- */

/* [å¯¼è¯­] */
.editorial-body > p:first-of-type {
    font-size: 1.2rem;
    font-weight: 500;
    line-height: 1.55;
    margin-bottom: 1.8rem;
    opacity: 1;
}

/* [åŠ ç²—] ç²¾è‡´ä¸‹åˆ’çº¿ */
.editorial-body strong {
    font-weight: 600;
    color: var(--primary);
    text-decoration: underline;
    text-decoration-color: var(--mood-color); 
    text-decoration-thickness: 1.5px;
    text-underline-offset: 3px;
}

/* [ç‹¬ç™½] å¼•ç”¨å— */
.editorial-body blockquote {
    font-size: 1.18rem;
    font-weight: 600;
    line-height: 1.5;
    margin: 3rem 0;
    padding: 0;
    border: none;
    color: var(--primary);
    letter-spacing: -0.01em;
}
.editorial-body blockquote p { font-size: inherit; opacity: 1; margin: 0; }

/* [é—´å¥] æ–œä½“ */
.editorial-body p:has(> em:only-child), 
.editorial-body p em:only-child {
    display: block;
    text-align: center;
    font-family: "Georgia", serif;
    font-style: italic;
    font-size: 1rem;
    margin: 3rem 0;
    opacity: 0.8;
}

/* [å›¾ç‰‡é«˜çº§åŒ–] æ ¸å¿ƒä¼˜åŒ–åŒº */
.editorial-body img,
.editorial-body figure {
    margin: 2.5rem 0;
    border-radius: 12px; /* è‹¹æœé£åœ†è§’ */
    overflow: hidden;
    /* æè‡´è½»ç›ˆçš„é˜´å½±ï¼Œè®©å›¾ç‰‡æœ‰æ‚¬æµ®æ„Ÿ */
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
}

/* å…¼å®¹ img.html ç”Ÿæˆçš„ figure ç»“æ„ */
.editorial-body figure {
    background: transparent;
    text-align: center;
}

.editorial-body figure img {
    margin: 0;
    display: block;
    width: 100%;
}

/* å›¾ç‰‡ä¸‹æ–¹çš„æè¿°æ–‡å­— (Caption) */
.editorial-body figure figcaption {
    font-size: 0.85rem;
    color: var(--secondary);
    margin-top: 12px;
    opacity: 0.7;
    font-style: italic;
    text-align: center;
}

/* [åˆ†å‰²çº¿] */
.editorial-body hr {
    height: 1px;
    border: none;
    background: var(--border);
    margin: 4rem 0 1.2rem 0;
    opacity: 0.25;
}

/* --- ğŸ“ ç»“è¯­ç´§å‡‘åŒ– --- */
.editorial-body hr + p {
    margin-bottom: 0 !important;
    font-size: 0.92rem;
    text-align: center;
    opacity: 0.6;
    line-height: 1.2;
}

.editorial-body hr ~ p:last-of-type {
    text-align: center;
    font-size: 1.12rem;
    font-weight: 700;
    opacity: 1 !important;
    margin-top: 0.3rem !important;
    letter-spacing: 0.01em;
}

.editorial-body hr ~ p:last-of-type strong,
.editorial-body hr ~ p:last-of-type {
    text-decoration: none !important;
}

/* --- ğŸš€ å›åˆ°é¡¶éƒ¨é¿ä½æ ·å¼ --- */
.top-link {
    bottom: 100px !important; /* ç•™è¨€èƒ¶å›Šåœ¨40pxï¼Œæ­¤é¡¹ç¡®ä¿åœ¨ä¸Š */
    right: 30px !important;
    background: var(--entry);
    border: 1px solid var(--border);
    width: 44px;
    height: 44px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    z-index: 100;
}

/* ç§»åŠ¨ç«¯ */
@media (max-width: 768px) {
    .apple-editorial { padding: 0 16px; margin: 25px auto; }
    .main-title { font-size: 1.65rem; }
    .editorial-body blockquote { font-size: 1.12rem; }
    .editorial-body img, .editorial-body figure { margin: 1.5rem 0; border-radius: 8px; }
    .top-link { bottom: 85px !important; right: 15px !important; width: 40px; height: 40px; }
}
</style>